### =========================================
### MÉTODOS DE PRUEBA - USUARIOS
### =========================================

### 1. CREAR USUARIOS NORMALES

### Crear usuario 1
# @name createUser1
POST http://localhost:3000/api/usuarios/register
Content-Type: application/json

{
  "nombre": "Anakin",
  "apellido": "Skywalker",
  "email": "anakinskw@darkside.com",
  "nombreUsuario": "anakinskw",
  "contrasenia": "anakin123",
  "pais": "Argentina",
  "rol": "user"
}

### Crear usuario 2
# @name createUser2
POST http://localhost:3000/api/usuarios/register
Content-Type: application/json

{
  "nombre": "Josuke",
  "apellido": "Higashikata",
  "email": "josukehgk@morioh.com",
  "nombreUsuario": "crazy_diamond",
  "contrasenia": "crazyJosukeDiamond",
  "pais": "Japon",
  "rol": "user"
}

### Crear usuario 3
# @name createUser3
POST http://localhost:3000/api/usuarios/register
Content-Type: application/json

{
  "nombre": "Levi",
  "apellido": "Ackerman",
  "email": "leviackerman@crack.com",
  "nombreUsuario": "MataTitanes23",
  "contrasenia": "levi1234",
  "pais": "España",
  "rol": "user"
}

### 2. LOGIN COMO ADMIN (primero necesitas crear un admin manualmente)
# @name adminLogin
POST http://localhost:3000/api/usuarios/login
Content-Type: application/json

{
  "identifier": "gianmarco",
  "contrasenia": "gianmarco123"
}

### 3. OBTENER TODOS LOS USUARIOS (requiere admin)
GET http://localhost:3000/api/usuarios
Cookie: token_acceso={{adminLogin.response.headers.Set-Cookie}}

### 4. OBTENER UN USUARIO ESPECÍFICO (requiere admin)
@userId = {{createUser1.response.body.data.id}}
GET http://localhost:3000/api/usuarios/{{userId}}
Cookie: token_acceso={{adminLogin.response.headers.Set-Cookie}}

### 5. MODIFICAR USUARIO COMPLETO (requiere ser el dueño o admin)
PUT http://localhost:3000/api/usuarios/{{userId}}
Content-Type: application/json
Cookie: token_acceso={{adminLogin.response.headers.Set-Cookie}}

{
  "nombre": "Luke",
  "apellido": "Skywalker",
  "email": "lukeskw@email.com",
  "nombreUsuario": "LaNuevaEsperanza22",
  "contrasenia": "lukeskw123",
  "pais": "Tattoine",
  "rol": "user"
}

### 6. MODIFICAR USUARIO PARCIALMENTE (requiere ser el dueño o admin)
PATCH http://localhost:3000/api/usuarios/{{userId}}
Content-Type: application/json
Cookie: token_acceso={{adminLogin.response.headers.Set-Cookie}}

{
  "nombre": "Lucas",
  "pais": "Argentina"
}

### 7. ELIMINAR UN USUARIO (requiere admin)
### NOTA: Ejecutar este solo si quieres probar la eliminación
# @name deleteUser
DELETE http://localhost:3000/api/usuarios/{{userId}}
Cookie: token_acceso={{adminLogin.response.headers.Set-Cookie}}

### 8. LOGOUT
POST http://localhost:3000/api/usuarios/logout
Cookie: token_acceso={{adminLogin.response.headers.Set-Cookie}}

### 9. RUTA PROTEGIDA (para probar autenticación)
GET http://localhost:3000/api/usuarios/ruta/protegida
Cookie: token_acceso={{adminLogin.response.headers.Set-Cookie}}

### =========================================
### MÉTODOS ALTERNATIVOS - LOGIN COMO USUARIO NORMAL
### =========================================

### Login como usuario normal
# @name userLogin
POST http://localhost:3000/api/usuarios/login
Content-Type: application/json

{
  "identifier": "MataTitanes23",
  "contrasenia": "levi1234"
}

### Intentar obtener todos los usuarios como usuario normal (debería fallar)
GET http://localhost:3000/api/usuarios
Cookie: token_acceso={{userLogin.response.headers.Set-Cookie}}

### Intentar eliminar usuario como usuario normal (debería fallar)
DELETE http://localhost:3000/api/usuarios/2
Cookie: token_acceso={{userLogin.response.headers.Set-Cookie}}

### =========================================
### VARIABLES PARA FACILITAR LAS PRUEBAS
### =========================================

@user1Id = {{createUser1.response.body.data.id}}
@user2Id = {{createUser2.response.body.data.id}}
@user3Id = {{createUser3.response.body.data.id}}

### Ver usuario 2 específico
GET http://localhost:3000/api/usuarios/{{user2Id}}
Cookie: token_acceso={{adminLogin.response.headers.Set-Cookie}}

### Ver usuario 3 específico
GET http://localhost:3000/api/usuarios/{{user3Id}}
Cookie: token_acceso={{adminLogin.response.headers.Set-Cookie}}